import"../vendor-react-Bo3cQ_TK.js";import"../vendor-react-dom-CbvJyPzC.js";import{c as i,$ as u,j as m,k as w,b,l as k,m as v}from"./utils-CNos-E2M.js";let h=!1,d=null,x=new Set,f=new Map,o=!1,$=!1;function s(e,n){for(let t of x)t(e,n)}function g(e){return!(e.metaKey||!w()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function c(e){o=!0,g(e)&&(d="keyboard",s("keyboard",e))}function a(e){d="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(o=!0,s("pointer",e))}function p(e){m(e)&&(o=!0,d="virtual")}function E(e){e.target===window||e.target===document||h||!e.isTrusted||(!o&&!$&&(d="virtual",s("virtual",e)),o=!1,$=!1)}function y(){o=!1,$=!0}function l(e){if(typeof window>"u"||typeof document>"u"||f.get(u(e)))return;const n=u(e),t=i(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){o=!0,r.apply(this,arguments)},t.addEventListener("keydown",c,!0),t.addEventListener("keyup",c,!0),t.addEventListener("click",p,!0),n.addEventListener("focus",E,!0),n.addEventListener("blur",y,!1),typeof PointerEvent<"u"&&(t.addEventListener("pointerdown",a,!0),t.addEventListener("pointermove",a,!0),t.addEventListener("pointerup",a,!0)),n.addEventListener("beforeunload",()=>{L(e)},{once:!0}),f.set(n,{focus:r})}const L=(e,n)=>{const t=u(e),r=i(e);n&&r.removeEventListener("DOMContentLoaded",n),f.has(t)&&(t.HTMLElement.prototype.focus=f.get(t).focus,r.removeEventListener("keydown",c,!0),r.removeEventListener("keyup",c,!0),r.removeEventListener("click",p,!0),t.removeEventListener("focus",E,!0),t.removeEventListener("blur",y,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",a,!0),r.removeEventListener("pointermove",a,!0),r.removeEventListener("pointerup",a,!0)),f.delete(t))};function M(e){const n=i(e);let t;return n.readyState!=="loading"?l(e):(t=()=>{l(e)},n.addEventListener("DOMContentLoaded",t)),()=>L(e,t)}typeof document<"u"&&M();function O(){return d}function H(e){const n=i(e),t=b(n);if(O()==="virtual"){let r=t;k(()=>{b(n)===r&&e.isConnected&&v(e)})}else v(e)}export{H as $,O as a};
