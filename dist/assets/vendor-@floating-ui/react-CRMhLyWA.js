import{r as u,R as Bt,j as te}from"../vendor-react-Bo3cQ_TK.js";import{K as cn,y as ve,x as Rt,q as ge,w as Ht,D as nt,C as ln,p as rt,A as an,H as Gt}from"./utils-C3e6sfwQ.js";import{t as Xe,i as Ut,f as fn}from"../vendor-tabbable-6_FK-X7s.js";import{r as dn}from"../vendor-react-dom-CbvJyPzC.js";import{u as pn}from"./react-dom-DpW997Or.js";function qt(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Yt(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(n=>{let{brand:t,version:r}=n;return t+"/"+r}).join(" "):navigator.userAgent}function mn(){return/apple/i.test(navigator.vendor)}function ft(){const e=/android/i;return e.test(qt())||e.test(Yt())}function gn(){return Yt().includes("jsdom/")}const xt="data-floating-ui-focusable",bn="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",ot="ArrowLeft",st="ArrowRight",vn="ArrowUp",hn="ArrowDown";function Ee(e){let n=e.activeElement;for(;((t=n)==null||(t=t.shadowRoot)==null?void 0:t.activeElement)!=null;){var t;n=n.shadowRoot.activeElement}return n}function ae(e,n){if(!e||!n)return!1;const t=n.getRootNode==null?void 0:n.getRootNode();if(e.contains(n))return!0;if(t&&cn(t)){let r=n;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Ie(e){return"composedPath"in e?e.composedPath()[0]:e.target}function it(e,n){if(n==null)return!1;if("composedPath"in e)return e.composedPath().includes(n);const t=e;return t.target!=null&&n.contains(t.target)}function Rn(e){return e.matches("html,body")}function pe(e){return(e==null?void 0:e.ownerDocument)||document}function zt(e){return ve(e)&&e.matches(bn)}function dt(e){return e?e.getAttribute("role")==="combobox"&&zt(e):!1}function Ye(e){return e?e.hasAttribute(xt)?e:e.querySelector("["+xt+"]")||e:null}function Me(e,n,t){return t===void 0&&(t=!0),e.filter(s=>{var i;return s.parentId===n&&(!t||((i=s.context)==null?void 0:i.open))}).flatMap(s=>[s,...Me(e,s.id,t)])}function xn(e,n){let t,r=-1;function s(i,o){o>r&&(t=i,r=o),Me(e,i).forEach(g=>{s(g.id,o+1)})}return s(n,0),e.find(i=>i.id===t)}function yt(e,n){var t;let r=[],s=(t=e.find(i=>i.id===n))==null?void 0:t.parentId;for(;s;){const i=e.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function re(e){e.preventDefault(),e.stopPropagation()}function yn(e){return"nativeEvent"in e}function Xt(e){return e.mozInputSource===0&&e.isTrusted?!0:ft()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Jt(e){return gn()?!1:!ft()&&e.width===0&&e.height===0||ft()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Et(e,n){return["mouse","pen"].includes(e)}var En=typeof document<"u",In=function(){},$=En?u.useLayoutEffect:In;const wn={...Bt};function he(e){const n=u.useRef(e);return $(()=>{n.current=e}),n}const Tn=wn.useInsertionEffect,Cn=Tn||(e=>e());function oe(e){const n=u.useRef(()=>{});return Cn(()=>{n.current=e}),u.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return n.current==null?void 0:n.current(...r)},[])}function $e(e,n,t){return Math.floor(e/n)!==t}function Pe(e,n){return n<0||n>=e.current.length}function ut(e,n){return ie(e,{disabledIndices:n})}function It(e,n){return ie(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:n})}function ie(e,n){let{startingIndex:t=-1,decrement:r=!1,disabledIndices:s,amount:i=1}=n===void 0?{}:n,o=t;do o+=r?-i:i;while(o>=0&&o<=e.current.length-1&&qe(e,o,s));return o}function On(e,n){let{event:t,orientation:r,loop:s,rtl:i,cols:o,disabledIndices:c,minIndex:g,maxIndex:l,prevIndex:a,stopEvent:b=!1}=n,d=a;if(t.key===vn){if(b&&re(t),a===-1)d=l;else if(d=ie(e,{startingIndex:d,amount:o,decrement:!0,disabledIndices:c}),s&&(a-o<g||d<0)){const m=a%o,v=l%o,f=l-(v-m);v===m?d=l:d=v>m?f:f-o}Pe(e,d)&&(d=a)}if(t.key===hn&&(b&&re(t),a===-1?d=g:(d=ie(e,{startingIndex:a,amount:o,disabledIndices:c}),s&&a+o>l&&(d=ie(e,{startingIndex:a%o-o,amount:o,disabledIndices:c}))),Pe(e,d)&&(d=a)),r==="both"){const m=Rt(a/o);t.key===(i?ot:st)&&(b&&re(t),a%o!==o-1?(d=ie(e,{startingIndex:a,disabledIndices:c}),s&&$e(d,o,m)&&(d=ie(e,{startingIndex:a-a%o-1,disabledIndices:c}))):s&&(d=ie(e,{startingIndex:a-a%o-1,disabledIndices:c})),$e(d,o,m)&&(d=a)),t.key===(i?st:ot)&&(b&&re(t),a%o!==0?(d=ie(e,{startingIndex:a,decrement:!0,disabledIndices:c}),s&&$e(d,o,m)&&(d=ie(e,{startingIndex:a+(o-a%o),decrement:!0,disabledIndices:c}))):s&&(d=ie(e,{startingIndex:a+(o-a%o),decrement:!0,disabledIndices:c})),$e(d,o,m)&&(d=a));const v=Rt(l/o)===m;Pe(e,d)&&(s&&v?d=t.key===(i?st:ot)?l:ie(e,{startingIndex:a-a%o-1,disabledIndices:c}):d=a)}return d}function Mn(e,n,t){const r=[];let s=0;return e.forEach((i,o)=>{let{width:c,height:g}=i,l=!1;for(t&&(s=0);!l;){const a=[];for(let b=0;b<c;b++)for(let d=0;d<g;d++)a.push(s+b+d*n);s%n+c<=n&&a.every(b=>r[b]==null)?(a.forEach(b=>{r[b]=o}),l=!0):s++}}),[...r]}function kn(e,n,t,r,s){if(e===-1)return-1;const i=t.indexOf(e),o=n[e];switch(s){case"tl":return i;case"tr":return o?i+o.width-1:i;case"bl":return o?i+(o.height-1)*r:i;case"br":return t.lastIndexOf(e)}}function Sn(e,n){return n.flatMap((t,r)=>e.includes(t)?[r]:[])}function qe(e,n,t){if(typeof t=="function")return t(n);if(t)return t.includes(n);const r=e.current[n];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}const Le=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Qt(e,n){const t=Xe(e,Le()),r=t.length;if(r===0)return;const s=Ee(pe(e)),i=t.indexOf(s),o=i===-1?n===1?0:r-1:i+n;return t[o]}function Zt(e){return Qt(pe(e).body,1)||e}function en(e){return Qt(pe(e).body,-1)||e}function Fe(e,n){const t=n||e.currentTarget,r=e.relatedTarget;return!r||!ae(t,r)}function An(e){Xe(e,Le()).forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")})}function wt(e){e.querySelectorAll("[data-tabindex]").forEach(t=>{const r=t.dataset.tabindex;delete t.dataset.tabindex,r?t.setAttribute("tabindex",r):t.removeAttribute("tabindex")})}function Pn(e,n){const t=e.compareDocumentPosition(n);return t&Node.DOCUMENT_POSITION_FOLLOWING||t&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:t&Node.DOCUMENT_POSITION_PRECEDING||t&Node.DOCUMENT_POSITION_CONTAINS?1:0}const tn=u.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function cr(e){const{children:n,elementsRef:t,labelsRef:r}=e,[s,i]=u.useState(()=>new Set),o=u.useCallback(l=>{i(a=>new Set(a).add(l))},[]),c=u.useCallback(l=>{i(a=>{const b=new Set(a);return b.delete(l),b})},[]),g=u.useMemo(()=>{const l=new Map;return Array.from(s.keys()).sort(Pn).forEach((b,d)=>{l.set(b,d)}),l},[s]);return te.jsx(tn.Provider,{value:u.useMemo(()=>({register:o,unregister:c,map:g,elementsRef:t,labelsRef:r}),[o,c,g,t,r]),children:n})}function lr(e){e===void 0&&(e={});const{label:n}=e,{register:t,unregister:r,map:s,elementsRef:i,labelsRef:o}=u.useContext(tn),[c,g]=u.useState(null),l=u.useRef(null),a=u.useCallback(b=>{if(l.current=b,c!==null&&(i.current[c]=b,o)){var d;const m=n!==void 0;o.current[c]=m?n:(d=b==null?void 0:b.textContent)!=null?d:null}},[c,i,o,n]);return $(()=>{const b=l.current;if(b)return t(b),()=>{r(b)}},[t,r]),$(()=>{const b=l.current?s.get(l.current):null;b!=null&&g(b)},[s]),u.useMemo(()=>({ref:a,index:c??-1}),[c,a])}const Fn="data-floating-ui-focusable",Tt="active",Ct="selected",Ne="ArrowLeft",_e="ArrowRight",nn="ArrowUp",Je="ArrowDown",Dn={...Bt};let Ot=!1,Ln=0;const Mt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ln++;function Nn(){const[e,n]=u.useState(()=>Ot?Mt():void 0);return $(()=>{e==null&&n(Mt())},[]),u.useEffect(()=>{Ot=!0},[]),e}const _n=Dn.useId,Qe=_n||Nn,ar=u.forwardRef(function(n,t){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:c=14,height:g=7,tipRadius:l=0,strokeWidth:a=0,staticOffset:b,stroke:d,d:m,style:{transform:v,...f}={},...y}=n,O=Qe(),[x,h]=u.useState(!1);if($(()=>{if(!s)return;Ht(s).direction==="rtl"&&h(!0)},[s]),!s)return null;const[C,z]=r.split("-"),N=C==="top"||C==="bottom";let K=b;(N&&o!=null&&o.x||!N&&o!=null&&o.y)&&(K=null);const B=a*2,J=B/2,P=c/2*(l/-8+1),q=g/2*l/4,V=!!m,ne=K&&z==="end"?"bottom":"top";let M=K&&z==="end"?"right":"left";K&&x&&(M=z==="end"?"left":"right");const p=(i==null?void 0:i.x)!=null?K||i.x:"",L=(i==null?void 0:i.y)!=null?K||i.y:"",D=m||"M0,0"+(" H"+c)+(" L"+(c-P)+","+(g-q))+(" Q"+c/2+","+g+" "+P+","+(g-q))+" Z",R={top:V?"rotate(180deg)":"",left:V?"rotate(90deg)":"rotate(-90deg)",bottom:V?"":"rotate(180deg)",right:V?"rotate(-90deg)":"rotate(90deg)"}[C];return te.jsxs("svg",{...y,"aria-hidden":!0,ref:t,width:V?c:c+B,height:c,viewBox:"0 0 "+c+" "+(g>c?g:c),style:{position:"absolute",pointerEvents:"none",[M]:p,[ne]:L,[C]:N||V?"100%":"calc(100% - "+B/2+"px)",transform:[R,v].filter(I=>!!I).join(" "),...f},children:[B>0&&te.jsx("path",{clipPath:"url(#"+O+")",fill:"none",stroke:d,strokeWidth:B+(m?0:1),d:D}),te.jsx("path",{stroke:B&&!m?y.fill:"none",d:D}),te.jsx("clipPath",{id:O,children:te.jsx("rect",{x:-J,y:J*(V?-1:1),width:c+B,height:c})})]})});function Kn(){const e=new Map;return{emit(n,t){var r;(r=e.get(n))==null||r.forEach(s=>s(t))},on(n,t){e.has(n)||e.set(n,new Set),e.get(n).add(t)},off(n,t){var r;(r=e.get(n))==null||r.delete(t)}}}const Wn=u.createContext(null),jn=u.createContext(null),mt=()=>{var e;return((e=u.useContext(Wn))==null?void 0:e.id)||null},Ze=()=>u.useContext(jn);function De(e){return"data-floating-ui-"+e}function pt(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}let kt=0;function Ce(e,n){n===void 0&&(n={});const{preventScroll:t=!1,cancelPrevious:r=!0,sync:s=!1}=n;r&&cancelAnimationFrame(kt);const i=()=>e==null?void 0:e.focus({preventScroll:t});s?i():kt=requestAnimationFrame(i)}function Vn(e){return(e==null?void 0:e.ownerDocument)||document}const ke={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function St(e){return e==="inert"?ke.inert:e==="aria-hidden"?ke["aria-hidden"]:ke.none}let Be=new WeakSet,He={},ct=0;const $n=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,rn=e=>e&&(e.host||rn(e.parentNode)),Bn=(e,n)=>n.map(t=>{if(e.contains(t))return t;const r=rn(t);return e.contains(r)?r:null}).filter(t=>t!=null);function Hn(e,n,t,r){const s="data-floating-ui-inert",i=r?"inert":t?"aria-hidden":null,o=Bn(n,e),c=new Set,g=new Set(o),l=[];He[s]||(He[s]=new WeakMap);const a=He[s];o.forEach(b),d(n),c.clear();function b(m){!m||c.has(m)||(c.add(m),m.parentNode&&b(m.parentNode))}function d(m){!m||g.has(m)||[].forEach.call(m.children,v=>{if(Gt(v)!=="script")if(c.has(v))d(v);else{const f=i?v.getAttribute(i):null,y=f!==null&&f!=="false",O=St(i),x=(O.get(v)||0)+1,h=(a.get(v)||0)+1;O.set(v,x),a.set(v,h),l.push(v),x===1&&y&&Be.add(v),h===1&&v.setAttribute(s,""),!y&&i&&v.setAttribute(i,i==="inert"?"":"true")}})}return ct++,()=>{l.forEach(m=>{const v=St(i),y=(v.get(m)||0)-1,O=(a.get(m)||0)-1;v.set(m,y),a.set(m,O),y||(!Be.has(m)&&i&&m.removeAttribute(i),Be.delete(m)),O||m.removeAttribute(s)}),ct--,ct||(ke.inert=new WeakMap,ke["aria-hidden"]=new WeakMap,ke.none=new WeakMap,Be=new WeakSet,He={})}}function At(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!1);const r=Vn(e[0]).body;return Hn(e.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,n,t)}const et={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},ze=u.forwardRef(function(n,t){const[r,s]=u.useState();$(()=>{mn()&&s("button")},[]);const i={ref:t,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[De("focus-guard")]:"",style:et};return te.jsx("span",{...n,...i})}),on=u.createContext(null),Pt=De("portal");function Gn(e){e===void 0&&(e={});const{id:n,root:t}=e,r=Qe(),s=sn(),[i,o]=u.useState(null),c=u.useRef(null);return $(()=>()=>{i==null||i.remove(),queueMicrotask(()=>{c.current=null})},[i]),$(()=>{if(!r||c.current)return;const g=n?document.getElementById(n):null;if(!g)return;const l=document.createElement("div");l.id=r,l.setAttribute(Pt,""),g.appendChild(l),c.current=l,o(l)},[n,r]),$(()=>{if(t===null||!r||c.current)return;let g=t||(s==null?void 0:s.portalNode);g&&!ge(g)&&(g=g.current),g=g||document.body;let l=null;n&&(l=document.createElement("div"),l.id=n,g.appendChild(l));const a=document.createElement("div");a.id=r,a.setAttribute(Pt,""),g=l||g,g.appendChild(a),c.current=a,o(a)},[n,t,r,s]),i}function fr(e){const{children:n,id:t,root:r,preserveTabOrder:s=!0}=e,i=Gn({id:t,root:r}),[o,c]=u.useState(null),g=u.useRef(null),l=u.useRef(null),a=u.useRef(null),b=u.useRef(null),d=o==null?void 0:o.modal,m=o==null?void 0:o.open,v=!!o&&!o.modal&&o.open&&s&&!!(r||i);return u.useEffect(()=>{if(!i||!s||d)return;function f(y){i&&Fe(y)&&(y.type==="focusin"?wt:An)(i)}return i.addEventListener("focusin",f,!0),i.addEventListener("focusout",f,!0),()=>{i.removeEventListener("focusin",f,!0),i.removeEventListener("focusout",f,!0)}},[i,s,d]),u.useEffect(()=>{i&&(m||wt(i))},[m,i]),te.jsxs(on.Provider,{value:u.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:g,afterOutsideRef:l,beforeInsideRef:a,afterInsideRef:b,portalNode:i,setFocusManagerState:c}),[s,i]),children:[v&&i&&te.jsx(ze,{"data-type":"outside",ref:g,onFocus:f=>{if(Fe(f,i)){var y;(y=a.current)==null||y.focus()}else{const O=o?o.domReference:null,x=en(O);x==null||x.focus()}}}),v&&i&&te.jsx("span",{"aria-owns":i.id,style:et}),i&&dn.createPortal(n,i),v&&i&&te.jsx(ze,{"data-type":"outside",ref:l,onFocus:f=>{if(Fe(f,i)){var y;(y=b.current)==null||y.focus()}else{const O=o?o.domReference:null,x=Zt(O);x==null||x.focus(),o!=null&&o.closeOnFocusOut&&(o==null||o.onOpenChange(!1,f.nativeEvent,"focus-out"))}}})]})}const sn=()=>u.useContext(on);function Ft(e){return u.useMemo(()=>n=>{e.forEach(t=>{t&&(t.current=n)})},e)}const Un=20;let Oe=[];function qn(e){Oe=Oe.filter(n=>n.isConnected),e&&Gt(e)!=="body"&&(Oe.push(e),Oe.length>Un&&(Oe=Oe.slice(-20)))}function Dt(){return Oe.slice().reverse().find(e=>e.isConnected)}function Yn(e){const n=Le();return Ut(e,n)?e:Xe(e,n)[0]||e}function Lt(e,n){var t;if(!n.current.includes("floating")&&!((t=e.getAttribute("role"))!=null&&t.includes("dialog")))return;const r=Le(),i=fn(e,r).filter(c=>{const g=c.getAttribute("data-tabindex")||"";return Ut(c,r)||c.hasAttribute("data-tabindex")&&!g.startsWith("-")}),o=e.getAttribute("tabindex");n.current.includes("floating")||i.length===0?o!=="0"&&e.setAttribute("tabindex","0"):(o!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const zn=u.forwardRef(function(n,t){return te.jsx("button",{...n,type:"button",ref:t,tabIndex:-1,style:et})});function dr(e){const{context:n,children:t,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:c=!0,restoreFocus:g=!1,modal:l=!0,visuallyHiddenDismiss:a=!1,closeOnFocusOut:b=!0,outsideElementsInert:d=!1,getInsideElements:m=()=>[]}=e,{open:v,onOpenChange:f,events:y,dataRef:O,elements:{domReference:x,floating:h}}=n,C=oe(()=>{var A;return(A=O.current.floatingContext)==null?void 0:A.nodeId}),z=oe(m),N=typeof o=="number"&&o<0,K=dt(x)&&N,B=$n(),J=B?i:!0,P=!J||B&&d,q=he(s),V=he(o),ne=he(c),M=Ze(),p=sn(),L=u.useRef(null),D=u.useRef(null),R=u.useRef(!1),I=u.useRef(!1),W=u.useRef(-1),Q=p!=null,T=Ye(h),fe=oe(function(A){return A===void 0&&(A=T),A?Xe(A,Le()):[]}),se=oe(A=>{const F=fe(A);return q.current.map(k=>x&&k==="reference"?x:T&&k==="floating"?T:F).filter(Boolean).flat()});u.useEffect(()=>{if(r||!l)return;function A(k){if(k.key==="Tab"){ae(T,Ee(pe(T)))&&fe().length===0&&!K&&re(k);const S=se(),Z=Ie(k);q.current[0]==="reference"&&Z===x&&(re(k),k.shiftKey?Ce(S[S.length-1]):Ce(S[1])),q.current[1]==="floating"&&Z===T&&k.shiftKey&&(re(k),Ce(S[0]))}}const F=pe(T);return F.addEventListener("keydown",A),()=>{F.removeEventListener("keydown",A)}},[r,x,T,l,q,K,fe,se]),u.useEffect(()=>{if(r||!h)return;function A(F){const k=Ie(F),Z=fe().indexOf(k);Z!==-1&&(W.current=Z)}return h.addEventListener("focusin",A),()=>{h.removeEventListener("focusin",A)}},[r,h,fe]),u.useEffect(()=>{if(r||!b)return;function A(){I.current=!0,setTimeout(()=>{I.current=!1})}function F(k){const S=k.relatedTarget,Z=k.currentTarget,X=Ie(k);queueMicrotask(()=>{const ce=C(),le=!(ae(x,S)||ae(h,S)||ae(S,h)||ae(p==null?void 0:p.portalNode,S)||S!=null&&S.hasAttribute(De("focus-guard"))||M&&(Me(M.nodesRef.current,ce).find(j=>{var H,me;return ae((H=j.context)==null?void 0:H.elements.floating,S)||ae((me=j.context)==null?void 0:me.elements.domReference,S)})||yt(M.nodesRef.current,ce).find(j=>{var H,me,E;return[(H=j.context)==null?void 0:H.elements.floating,Ye((me=j.context)==null?void 0:me.elements.floating)].includes(S)||((E=j.context)==null?void 0:E.elements.domReference)===S})));if(Z===x&&T&&Lt(T,q),g&&Z!==x&&!(X!=null&&X.isConnected)&&Ee(pe(T))===pe(T).body){ve(T)&&T.focus();const j=W.current,H=fe(),me=H[j]||H[H.length-1]||T;ve(me)&&me.focus()}if(O.current.insideReactTree){O.current.insideReactTree=!1;return}(K||!l)&&S&&le&&!I.current&&S!==Dt()&&(R.current=!0,f(!1,k,"focus-out"))})}if(h&&ve(x))return x.addEventListener("focusout",F),x.addEventListener("pointerdown",A),h.addEventListener("focusout",F),()=>{x.removeEventListener("focusout",F),x.removeEventListener("pointerdown",A),h.removeEventListener("focusout",F)}},[r,x,h,T,l,M,p,f,b,g,fe,K,C,q,O]);const be=u.useRef(null),Y=u.useRef(null),ue=Ft([be,p==null?void 0:p.beforeInsideRef]),Re=Ft([Y,p==null?void 0:p.afterInsideRef]);u.useEffect(()=>{var A,F;if(r||!h)return;const k=Array.from((p==null||(A=p.portalNode)==null?void 0:A.querySelectorAll("["+De("portal")+"]"))||[]),S=M?yt(M.nodesRef.current,C()):[],Z=M&&!l?S.map(j=>{var H;return(H=j.context)==null?void 0:H.elements.floating}):[],X=(F=S.find(j=>{var H;return dt(((H=j.context)==null?void 0:H.elements.domReference)||null)}))==null||(F=F.context)==null?void 0:F.elements.domReference,ce=[h,X,...k,...Z,...z(),L.current,D.current,be.current,Y.current,p==null?void 0:p.beforeOutsideRef.current,p==null?void 0:p.afterOutsideRef.current,q.current.includes("reference")||K?x:null].filter(j=>j!=null),le=l||K?At(ce,!P,P):At(ce);return()=>{le()}},[r,x,h,l,q,p,K,J,P,M,C,z]),$(()=>{if(r||!ve(T))return;const A=pe(T),F=Ee(A);queueMicrotask(()=>{const k=se(T),S=V.current,Z=(typeof S=="number"?k[S]:S.current)||T,X=ae(T,F);!N&&!X&&v&&Ce(Z,{preventScroll:Z===T})})},[r,v,T,N,se,V]),$(()=>{if(r||!T)return;const A=pe(T),F=Ee(A);qn(F);function k(X){let{reason:ce,event:le,nested:j}=X;if(["hover","safe-polygon"].includes(ce)&&le.type==="mouseleave"&&(R.current=!0),ce==="outside-press")if(j)R.current=!1;else if(Xt(le)||Jt(le))R.current=!1;else{let H=!1;document.createElement("div").focus({get preventScroll(){return H=!0,!1}}),H?R.current=!1:R.current=!0}}y.on("openchange",k);const S=A.createElement("span");S.setAttribute("tabindex","-1"),S.setAttribute("aria-hidden","true"),Object.assign(S.style,et),Q&&x&&x.insertAdjacentElement("afterend",S);function Z(){if(typeof ne.current=="boolean"){const X=x||Dt();return X&&X.isConnected?X:S}return ne.current.current||S}return()=>{y.off("openchange",k);const X=Ee(A),ce=ae(h,X)||M&&Me(M.nodesRef.current,C(),!1).some(j=>{var H;return ae((H=j.context)==null?void 0:H.elements.floating,X)}),le=Z();queueMicrotask(()=>{const j=Yn(le);ne.current&&!R.current&&ve(j)&&(!(j!==X&&X!==A.body)||ce)&&j.focus({preventScroll:!0}),S.remove()})}},[r,h,T,ne,O,y,M,Q,x,C]),u.useEffect(()=>{queueMicrotask(()=>{R.current=!1})},[r]),$(()=>{if(!r&&p)return p.setFocusManagerState({modal:l,closeOnFocusOut:b,open:v,onOpenChange:f,domReference:x}),()=>{p.setFocusManagerState(null)}},[r,p,l,v,f,b,x]),$(()=>{r||T&&Lt(T,q)},[r,T,q]);function we(A){return r||!a||!l?null:te.jsx(zn,{ref:A==="start"?L:D,onClick:F=>f(!1,F.nativeEvent),children:typeof a=="string"?a:"Dismiss"})}const xe=!r&&J&&(l?!K:!0)&&(Q||l);return te.jsxs(te.Fragment,{children:[xe&&te.jsx(ze,{"data-type":"inside",ref:ue,onFocus:A=>{if(l){const k=se();Ce(s[0]==="reference"?k[0]:k[k.length-1])}else if(p!=null&&p.preserveTabOrder&&p.portalNode)if(R.current=!1,Fe(A,p.portalNode)){const k=Zt(x);k==null||k.focus()}else{var F;(F=p.beforeOutsideRef.current)==null||F.focus()}}}),!K&&we("start"),t,we("end"),xe&&te.jsx(ze,{"data-type":"inside",ref:Re,onFocus:A=>{if(l)Ce(se()[0]);else if(p!=null&&p.preserveTabOrder&&p.portalNode)if(b&&(R.current=!0),Fe(A,p.portalNode)){const k=en(x);k==null||k.focus()}else{var F;(F=p.afterOutsideRef.current)==null||F.focus()}}})]})}let Ge=0;const Nt="--floating-ui-scrollbar-width";function Xn(){const e=qt(),n=/iP(hone|ad|od)|iOS/.test(e)||e==="MacIntel"&&navigator.maxTouchPoints>1,t=document.body.style,s=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,c=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",t.setProperty(Nt,i+"px"),i&&(t[s]=i+"px"),n){var g,l;const a=((g=window.visualViewport)==null?void 0:g.offsetLeft)||0,b=((l=window.visualViewport)==null?void 0:l.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(c-Math.floor(b))+"px",left:-(o-Math.floor(a))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[s]:""}),t.removeProperty(Nt),n&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,c))}}let _t=()=>{};const pr=u.forwardRef(function(n,t){const{lockScroll:r=!1,...s}=n;return $(()=>{if(r)return Ge++,Ge===1&&(_t=Xn()),()=>{Ge--,Ge===0&&_t()}},[r]),te.jsx("div",{ref:t,...s,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...s.style}})});function Kt(e){return ve(e.target)&&e.target.tagName==="BUTTON"}function Jn(e){return ve(e.target)&&e.target.tagName==="A"}function Wt(e){return zt(e)}function mr(e,n){n===void 0&&(n={});const{open:t,onOpenChange:r,dataRef:s,elements:{domReference:i}}=e,{enabled:o=!0,event:c="click",toggle:g=!0,ignoreMouse:l=!1,keyboardHandlers:a=!0,stickIfOpen:b=!0}=n,d=u.useRef(),m=u.useRef(!1),v=u.useMemo(()=>({onPointerDown(f){d.current=f.pointerType},onMouseDown(f){const y=d.current;f.button===0&&c!=="click"&&(Et(y)&&l||(t&&g&&(!(s.current.openEvent&&b)||s.current.openEvent.type==="mousedown")?r(!1,f.nativeEvent,"click"):(f.preventDefault(),r(!0,f.nativeEvent,"click"))))},onClick(f){const y=d.current;if(c==="mousedown"&&d.current){d.current=void 0;return}Et(y)&&l||(t&&g&&(!(s.current.openEvent&&b)||s.current.openEvent.type==="click")?r(!1,f.nativeEvent,"click"):r(!0,f.nativeEvent,"click"))},onKeyDown(f){d.current=void 0,!(f.defaultPrevented||!a||Kt(f))&&(f.key===" "&&!Wt(i)&&(f.preventDefault(),m.current=!0),!Jn(f)&&f.key==="Enter"&&r(!(t&&g),f.nativeEvent,"click"))},onKeyUp(f){f.defaultPrevented||!a||Kt(f)||Wt(i)||f.key===" "&&m.current&&(m.current=!1,r(!(t&&g),f.nativeEvent,"click"))}}),[s,i,c,l,a,r,t,b,g]);return u.useMemo(()=>o?{reference:v}:{},[o,v])}const Qn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Zn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},jt=e=>{var n,t;return{escapeKey:typeof e=="boolean"?e:(n=e==null?void 0:e.escapeKey)!=null?n:!1,outsidePress:typeof e=="boolean"?e:(t=e==null?void 0:e.outsidePress)!=null?t:!0}};function gr(e,n){n===void 0&&(n={});const{open:t,onOpenChange:r,elements:s,dataRef:i}=e,{enabled:o=!0,escapeKey:c=!0,outsidePress:g=!0,outsidePressEvent:l="pointerdown",referencePress:a=!1,referencePressEvent:b="pointerdown",ancestorScroll:d=!1,bubbles:m,capture:v}=n,f=Ze(),y=oe(typeof g=="function"?g:()=>!1),O=typeof g=="function"?y:g,x=u.useRef(!1),{escapeKey:h,outsidePress:C}=jt(m),{escapeKey:z,outsidePress:N}=jt(v),K=u.useRef(!1),B=u.useRef(-1),J=oe(p=>{var L;if(!t||!o||!c||p.key!=="Escape"||K.current)return;const D=(L=i.current.floatingContext)==null?void 0:L.nodeId,R=f?Me(f.nodesRef.current,D):[];if(!h&&(p.stopPropagation(),R.length>0)){let I=!0;if(R.forEach(W=>{var Q;if((Q=W.context)!=null&&Q.open&&!W.context.dataRef.current.__escapeKeyBubbles){I=!1;return}}),!I)return}r(!1,yn(p)?p.nativeEvent:p,"escape-key")}),P=oe(p=>{var L;const D=()=>{var R;J(p),(R=Ie(p))==null||R.removeEventListener("keydown",D)};(L=Ie(p))==null||L.addEventListener("keydown",D)}),q=oe(p=>{var L;const D=i.current.insideReactTree;i.current.insideReactTree=!1;const R=x.current;if(x.current=!1,l==="click"&&R||D||typeof O=="function"&&!O(p))return;const I=Ie(p),W="["+De("inert")+"]",Q=pe(s.floating).querySelectorAll(W);let T=ge(I)?I:null;for(;T&&!nt(T);){const Y=ln(T);if(nt(Y)||!ge(Y))break;T=Y}if(Q.length&&ge(I)&&!Rn(I)&&!ae(I,s.floating)&&Array.from(Q).every(Y=>!ae(T,Y)))return;if(ve(I)&&M){const Y=nt(I),ue=Ht(I),Re=/auto|scroll/,we=Y||Re.test(ue.overflowX),xe=Y||Re.test(ue.overflowY),A=we&&I.clientWidth>0&&I.scrollWidth>I.clientWidth,F=xe&&I.clientHeight>0&&I.scrollHeight>I.clientHeight,k=ue.direction==="rtl",S=F&&(k?p.offsetX<=I.offsetWidth-I.clientWidth:p.offsetX>I.clientWidth),Z=A&&p.offsetY>I.clientHeight;if(S||Z)return}const fe=(L=i.current.floatingContext)==null?void 0:L.nodeId,se=f&&Me(f.nodesRef.current,fe).some(Y=>{var ue;return it(p,(ue=Y.context)==null?void 0:ue.elements.floating)});if(it(p,s.floating)||it(p,s.domReference)||se)return;const be=f?Me(f.nodesRef.current,fe):[];if(be.length>0){let Y=!0;if(be.forEach(ue=>{var Re;if((Re=ue.context)!=null&&Re.open&&!ue.context.dataRef.current.__outsidePressBubbles){Y=!1;return}}),!Y)return}r(!1,p,"outside-press")}),V=oe(p=>{var L;const D=()=>{var R;q(p),(R=Ie(p))==null||R.removeEventListener(l,D)};(L=Ie(p))==null||L.addEventListener(l,D)});u.useEffect(()=>{if(!t||!o)return;i.current.__escapeKeyBubbles=h,i.current.__outsidePressBubbles=C;let p=-1;function L(Q){r(!1,Q,"ancestor-scroll")}function D(){window.clearTimeout(p),K.current=!0}function R(){p=window.setTimeout(()=>{K.current=!1},an()?5:0)}const I=pe(s.floating);c&&(I.addEventListener("keydown",z?P:J,z),I.addEventListener("compositionstart",D),I.addEventListener("compositionend",R)),O&&I.addEventListener(l,N?V:q,N);let W=[];return d&&(ge(s.domReference)&&(W=rt(s.domReference)),ge(s.floating)&&(W=W.concat(rt(s.floating))),!ge(s.reference)&&s.reference&&s.reference.contextElement&&(W=W.concat(rt(s.reference.contextElement)))),W=W.filter(Q=>{var T;return Q!==((T=I.defaultView)==null?void 0:T.visualViewport)}),W.forEach(Q=>{Q.addEventListener("scroll",L,{passive:!0})}),()=>{c&&(I.removeEventListener("keydown",z?P:J,z),I.removeEventListener("compositionstart",D),I.removeEventListener("compositionend",R)),O&&I.removeEventListener(l,N?V:q,N),W.forEach(Q=>{Q.removeEventListener("scroll",L)}),window.clearTimeout(p)}},[i,s,c,O,l,t,r,d,o,h,C,J,z,P,q,N,V]),u.useEffect(()=>{i.current.insideReactTree=!1},[i,O,l]);const ne=u.useMemo(()=>({onKeyDown:J,...a&&{[Qn[b]]:p=>{r(!1,p.nativeEvent,"reference-press")},...b!=="click"&&{onClick(p){r(!1,p.nativeEvent,"reference-press")}}}}),[J,r,a,b]),M=u.useMemo(()=>({onKeyDown:J,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[Zn[l]]:()=>{i.current.insideReactTree=!0},onBlurCapture(){f||(pt(B),i.current.insideReactTree=!0,B.current=window.setTimeout(()=>{i.current.insideReactTree=!1}))}}),[J,l,i,f]);return u.useMemo(()=>o?{reference:ne,floating:M}:{},[o,ne,M])}function er(e){const{open:n=!1,onOpenChange:t,elements:r}=e,s=Qe(),i=u.useRef({}),[o]=u.useState(()=>Kn()),c=mt()!=null,[g,l]=u.useState(r.reference),a=oe((m,v,f)=>{i.current.openEvent=m?v:void 0,o.emit("openchange",{open:m,event:v,reason:f,nested:c}),t==null||t(m,v,f)}),b=u.useMemo(()=>({setPositionReference:l}),[]),d=u.useMemo(()=>({reference:g||r.reference||null,floating:r.floating||null,domReference:r.reference}),[g,r.reference,r.floating]);return u.useMemo(()=>({dataRef:i,open:n,onOpenChange:a,elements:d,events:o,floatingId:s,refs:b}),[n,a,d,o,s,b])}function br(e){e===void 0&&(e={});const{nodeId:n}=e,t=er({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||t,s=r.elements,[i,o]=u.useState(null),[c,g]=u.useState(null),a=(s==null?void 0:s.domReference)||i,b=u.useRef(null),d=Ze();$(()=>{a&&(b.current=a)},[a]);const m=pn({...e,elements:{...s,...c&&{reference:c}}}),v=u.useCallback(h=>{const C=ge(h)?{getBoundingClientRect:()=>h.getBoundingClientRect(),getClientRects:()=>h.getClientRects(),contextElement:h}:h;g(C),m.refs.setReference(C)},[m.refs]),f=u.useCallback(h=>{(ge(h)||h===null)&&(b.current=h,o(h)),(ge(m.refs.reference.current)||m.refs.reference.current===null||h!==null&&!ge(h))&&m.refs.setReference(h)},[m.refs]),y=u.useMemo(()=>({...m.refs,setReference:f,setPositionReference:v,domReference:b}),[m.refs,f,v]),O=u.useMemo(()=>({...m.elements,domReference:a}),[m.elements,a]),x=u.useMemo(()=>({...m,...r,refs:y,elements:O,nodeId:n}),[m,y,O,n,r]);return $(()=>{r.dataRef.current.floatingContext=x;const h=d==null?void 0:d.nodesRef.current.find(C=>C.id===n);h&&(h.context=x)}),u.useMemo(()=>({...m,context:x,refs:y,elements:O}),[m,y,O,x])}function lt(e,n,t){const r=new Map,s=t==="item";let i=e;if(s&&e){const{[Tt]:o,[Ct]:c,...g}=e;i=g}return{...t==="floating"&&{tabIndex:-1,[Fn]:""},...i,...n.map(o=>{const c=o?o[t]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((o,c)=>(c&&Object.entries(c).forEach(g=>{let[l,a]=g;if(!(s&&[Tt,Ct].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof a=="function"){var b;(b=r.get(l))==null||b.push(a),o[l]=function(){for(var d,m=arguments.length,v=new Array(m),f=0;f<m;f++)v[f]=arguments[f];return(d=r.get(l))==null?void 0:d.map(y=>y(...v)).find(y=>y!==void 0)}}}else o[l]=a}),o),{})}}function vr(e){e===void 0&&(e=[]);const n=e.map(c=>c==null?void 0:c.reference),t=e.map(c=>c==null?void 0:c.floating),r=e.map(c=>c==null?void 0:c.item),s=u.useCallback(c=>lt(c,e,"reference"),n),i=u.useCallback(c=>lt(c,e,"floating"),t),o=u.useCallback(c=>lt(c,e,"item"),r);return u.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}const tr="Escape";function tt(e,n,t){switch(e){case"vertical":return n;case"horizontal":return t;default:return n||t}}function Ue(e,n){return tt(n,e===nn||e===Je,e===Ne||e===_e)}function at(e,n,t){return tt(n,e===Je,t?e===Ne:e===_e)||e==="Enter"||e===" "||e===""}function Vt(e,n,t){return tt(n,t?e===Ne:e===_e,e===Je)}function $t(e,n,t,r){const s=t?e===_e:e===Ne,i=e===nn;return n==="both"||n==="horizontal"&&r&&r>1?e===tr:tt(n,s,i)}function hr(e,n){const{open:t,onOpenChange:r,elements:s,floatingId:i}=e,{listRef:o,activeIndex:c,onNavigate:g=()=>{},enabled:l=!0,selectedIndex:a=null,allowEscape:b=!1,loop:d=!1,nested:m=!1,rtl:v=!1,virtual:f=!1,focusItemOnOpen:y="auto",focusItemOnHover:O=!0,openOnArrowKeyDown:x=!0,disabledIndices:h=void 0,orientation:C="vertical",parentOrientation:z,cols:N=1,scrollItemIntoView:K=!0,virtualItemRef:B,itemSizes:J,dense:P=!1}=n,q=Ye(s.floating),V=he(q),ne=mt(),M=Ze();$(()=>{e.dataRef.current.orientation=C},[e,C]);const p=oe(()=>{g(R.current===-1?null:R.current)}),L=dt(s.domReference),D=u.useRef(y),R=u.useRef(a??-1),I=u.useRef(null),W=u.useRef(!0),Q=u.useRef(p),T=u.useRef(!!s.floating),fe=u.useRef(t),se=u.useRef(!1),be=u.useRef(!1),Y=he(h),ue=he(t),Re=he(K),we=he(a),[xe,A]=u.useState(),[F,k]=u.useState(),S=oe(()=>{function E(U){if(f){var ee;(ee=U.id)!=null&&ee.endsWith("-fui-option")&&(U.id=i+"-"+Math.random().toString(16).slice(2,10)),A(U.id),M==null||M.events.emit("virtualfocus",U),B&&(B.current=U)}else Ce(U,{sync:se.current,preventScroll:!0})}const _=o.current[R.current],w=be.current;_&&E(_),(se.current?U=>U():requestAnimationFrame)(()=>{const U=o.current[R.current]||_;if(!U)return;_||E(U);const ee=Re.current;ee&&X&&(w||!W.current)&&(U.scrollIntoView==null||U.scrollIntoView(typeof ee=="boolean"?{block:"nearest",inline:"nearest"}:ee))})});$(()=>{l&&(t&&s.floating?D.current&&a!=null&&(be.current=!0,R.current=a,p()):T.current&&(R.current=-1,Q.current()))},[l,t,s.floating,a,p]),$(()=>{if(l&&t&&s.floating)if(c==null){if(se.current=!1,we.current!=null)return;if(T.current&&(R.current=-1,S()),(!fe.current||!T.current)&&D.current&&(I.current!=null||D.current===!0&&I.current==null)){let E=0;const _=()=>{o.current[0]==null?(E<2&&(E?requestAnimationFrame:queueMicrotask)(_),E++):(R.current=I.current==null||at(I.current,C,v)||m?ut(o,Y.current):It(o,Y.current),I.current=null,p())};_()}}else Pe(o,c)||(R.current=c,S(),be.current=!1)},[l,t,s.floating,c,we,m,o,C,v,p,S,Y]),$(()=>{var E;if(!l||s.floating||!M||f||!T.current)return;const _=M.nodesRef.current,w=(E=_.find(ee=>ee.id===ne))==null||(E=E.context)==null?void 0:E.elements.floating,G=Ee(pe(s.floating)),U=_.some(ee=>ee.context&&ae(ee.context.elements.floating,G));w&&!U&&W.current&&w.focus({preventScroll:!0})},[l,s.floating,M,ne,f]),$(()=>{if(!l||!M||!f||ne)return;function E(_){k(_.id),B&&(B.current=_)}return M.events.on("virtualfocus",E),()=>{M.events.off("virtualfocus",E)}},[l,M,f,ne,B]),$(()=>{Q.current=p,fe.current=t,T.current=!!s.floating}),$(()=>{t||(I.current=null,D.current=y)},[t,y]);const Z=c!=null,X=u.useMemo(()=>{function E(w){if(!ue.current)return;const G=o.current.indexOf(w);G!==-1&&R.current!==G&&(R.current=G,p())}return{onFocus(w){let{currentTarget:G}=w;se.current=!0,E(G)},onClick:w=>{let{currentTarget:G}=w;return G.focus({preventScroll:!0})},...O&&{onMouseMove(w){let{currentTarget:G}=w;se.current=!0,be.current=!1,E(G)},onPointerLeave(w){let{pointerType:G}=w;if(!(!W.current||G==="touch")&&(se.current=!0,R.current=-1,p(),!f)){var U;(U=V.current)==null||U.focus({preventScroll:!0})}}}}},[ue,V,O,o,p,f]),ce=u.useCallback(()=>{var E;return z??(M==null||(E=M.nodesRef.current.find(_=>_.id===ne))==null||(E=E.context)==null||(E=E.dataRef)==null?void 0:E.current.orientation)},[ne,M,z]),le=oe(E=>{if(W.current=!1,se.current=!0,E.which===229||!ue.current&&E.currentTarget===V.current)return;if(m&&$t(E.key,C,v,N)){Ue(E.key,ce())||re(E),r(!1,E.nativeEvent,"list-navigation"),ve(s.domReference)&&(f?M==null||M.events.emit("virtualfocus",s.domReference):s.domReference.focus());return}const _=R.current,w=ut(o,h),G=It(o,h);if(L||(E.key==="Home"&&(re(E),R.current=w,p()),E.key==="End"&&(re(E),R.current=G,p())),N>1){const U=J||Array.from({length:o.current.length},()=>({width:1,height:1})),ee=Mn(U,N,P),Se=ee.findIndex(de=>de!=null&&!qe(o,de,h)),Ke=ee.reduce((de,Te,We)=>Te!=null&&!qe(o,Te,h)?We:de,-1),Ae=ee[On({current:ee.map(de=>de!=null?o.current[de]:null)},{event:E,orientation:C,loop:d,rtl:v,cols:N,disabledIndices:Sn([...(typeof h!="function"?h:null)||o.current.map((de,Te)=>qe(o,Te,h)?Te:void 0),void 0],ee),minIndex:Se,maxIndex:Ke,prevIndex:kn(R.current>G?w:R.current,U,ee,N,E.key===Je?"bl":E.key===(v?Ne:_e)?"tr":"tl"),stopEvent:!0})];if(Ae!=null&&(R.current=Ae,p()),C==="both")return}if(Ue(E.key,C)){if(re(E),t&&!f&&Ee(E.currentTarget.ownerDocument)===E.currentTarget){R.current=at(E.key,C,v)?w:G,p();return}at(E.key,C,v)?d?R.current=_>=G?b&&_!==o.current.length?-1:w:ie(o,{startingIndex:_,disabledIndices:h}):R.current=Math.min(G,ie(o,{startingIndex:_,disabledIndices:h})):d?R.current=_<=w?b&&_!==-1?o.current.length:G:ie(o,{startingIndex:_,decrement:!0,disabledIndices:h}):R.current=Math.max(w,ie(o,{startingIndex:_,decrement:!0,disabledIndices:h})),Pe(o,R.current)&&(R.current=-1),p()}}),j=u.useMemo(()=>f&&t&&Z&&{"aria-activedescendant":F||xe},[f,t,Z,F,xe]),H=u.useMemo(()=>({"aria-orientation":C==="both"?void 0:C,...L?{}:j,onKeyDown:le,onPointerMove(){W.current=!0}}),[j,le,C,L]),me=u.useMemo(()=>{function E(w){y==="auto"&&Xt(w.nativeEvent)&&(D.current=!0)}function _(w){D.current=y,y==="auto"&&Jt(w.nativeEvent)&&(D.current=!0)}return{...j,onKeyDown(w){W.current=!1;const G=w.key.startsWith("Arrow"),U=["Home","End"].includes(w.key),ee=G||U,Se=Vt(w.key,C,v),Ke=$t(w.key,C,v,N),Ae=Vt(w.key,ce(),v),de=Ue(w.key,C),Te=(m?Ae:de)||w.key==="Enter"||w.key.trim()==="";if(f&&t){const je=M==null?void 0:M.nodesRef.current.find(Ve=>Ve.parentId==null),ye=M&&je?xn(M.nodesRef.current,je.id):null;if(ee&&ye&&B){const Ve=new KeyboardEvent("keydown",{key:w.key,bubbles:!0});if(Se||Ke){var We,gt;const un=((We=ye.context)==null?void 0:We.elements.domReference)===w.currentTarget,vt=Ke&&!un?(gt=ye.context)==null?void 0:gt.elements.domReference:Se?o.current.find(ht=>(ht==null?void 0:ht.id)===xe):null;vt&&(re(w),vt.dispatchEvent(Ve),k(void 0))}if((de||U)&&ye.context&&ye.context.open&&ye.parentId&&w.currentTarget!==ye.context.elements.domReference){var bt;re(w),(bt=ye.context.elements.domReference)==null||bt.dispatchEvent(Ve);return}}return le(w)}if(!(!t&&!x&&G)){if(Te){const je=Ue(w.key,ce());I.current=m&&je?null:w.key}if(m){Ae&&(re(w),t?(R.current=ut(o,Y.current),p()):r(!0,w.nativeEvent,"list-navigation"));return}de&&(a!=null&&(R.current=a),re(w),!t&&x?r(!0,w.nativeEvent,"list-navigation"):le(w),t&&p())}},onFocus(){t&&!f&&(R.current=-1,p())},onPointerDown:_,onPointerEnter:_,onMouseDown:E,onClick:E}},[xe,j,N,le,Y,y,o,m,p,r,t,x,C,ce,v,a,M,f,B]);return u.useMemo(()=>l?{reference:me,floating:H,item:X}:{},[l,me,H,X])}const nr=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Rr(e,n){var t,r;n===void 0&&(n={});const{open:s,elements:i,floatingId:o}=e,{enabled:c=!0,role:g="dialog"}=n,l=Qe(),a=((t=i.domReference)==null?void 0:t.id)||l,b=u.useMemo(()=>{var x;return((x=Ye(i.floating))==null?void 0:x.id)||o},[i.floating,o]),d=(r=nr.get(g))!=null?r:g,v=mt()!=null,f=u.useMemo(()=>d==="tooltip"||g==="label"?{["aria-"+(g==="label"?"labelledby":"describedby")]:s?b:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":d==="alertdialog"?"dialog":d,"aria-controls":s?b:void 0,...d==="listbox"&&{role:"combobox"},...d==="menu"&&{id:a},...d==="menu"&&v&&{role:"menuitem"},...g==="select"&&{"aria-autocomplete":"none"},...g==="combobox"&&{"aria-autocomplete":"list"}},[d,b,v,s,a,g]),y=u.useMemo(()=>{const x={id:b,...d&&{role:d}};return d==="tooltip"||g==="label"?x:{...x,...d==="menu"&&{"aria-labelledby":a}}},[d,b,a,g]),O=u.useCallback(x=>{let{active:h,selected:C}=x;const z={role:"option",...h&&{id:b+"-fui-option"}};switch(g){case"select":return{...z,"aria-selected":h&&C};case"combobox":return{...z,"aria-selected":C}}return{}},[b,g]);return u.useMemo(()=>c?{reference:f,floating:y,item:O}:{},[c,f,y,O])}function xr(e,n){var t;const{open:r,dataRef:s}=e,{listRef:i,activeIndex:o,onMatch:c,onTypingChange:g,enabled:l=!0,findMatch:a=null,resetMs:b=750,ignoreKeys:d=[],selectedIndex:m=null}=n,v=u.useRef(-1),f=u.useRef(""),y=u.useRef((t=m??o)!=null?t:-1),O=u.useRef(null),x=oe(c),h=oe(g),C=he(a),z=he(d);$(()=>{r&&(pt(v),O.current=null,f.current="")},[r]),$(()=>{if(r&&f.current===""){var P;y.current=(P=m??o)!=null?P:-1}},[r,m,o]);const N=oe(P=>{P?s.current.typing||(s.current.typing=P,h(P)):s.current.typing&&(s.current.typing=P,h(P))}),K=oe(P=>{function q(L,D,R){const I=C.current?C.current(D,R):D.find(W=>(W==null?void 0:W.toLocaleLowerCase().indexOf(R.toLocaleLowerCase()))===0);return I?L.indexOf(I):-1}const V=i.current;if(f.current.length>0&&f.current[0]!==" "&&(q(V,V,f.current)===-1?N(!1):P.key===" "&&re(P)),V==null||z.current.includes(P.key)||P.key.length!==1||P.ctrlKey||P.metaKey||P.altKey)return;r&&P.key!==" "&&(re(P),N(!0)),V.every(L=>{var D,R;return L?((D=L[0])==null?void 0:D.toLocaleLowerCase())!==((R=L[1])==null?void 0:R.toLocaleLowerCase()):!0})&&f.current===P.key&&(f.current="",y.current=O.current),f.current+=P.key,pt(v),v.current=window.setTimeout(()=>{f.current="",y.current=O.current,N(!1)},b);const M=y.current,p=q(V,[...V.slice((M||0)+1),...V.slice(0,(M||0)+1)],f.current);p!==-1?(x(p),O.current=p):P.key!==" "&&(f.current="",N(!1))}),B=u.useMemo(()=>({onKeyDown:K}),[K]),J=u.useMemo(()=>({onKeyDown:K,onKeyUp(P){P.key===" "&&N(!1)}}),[K,N]);return u.useMemo(()=>l?{reference:B,floating:J}:{},[l,B,J])}export{pr as F,fr as a,ar as b,lr as c,hr as d,xr as e,mr as f,gr as g,Rr as h,vr as i,dr as j,cr as k,br as u};
