import{e as H,g as $,a as B,c as _,b as N,d as Q,f as U,h as Z,i as Y,m as W,j as F,k as q,r as X,l as tt,n as G,o as J}from"./utils-C3e6sfwQ.js";function I(o,e,d){let{reference:s,floating:f}=o;const n=$(e),c=G(e),r=J(c),g=B(e),x=n==="y",i=s.x+s.width/2-f.width/2,a=s.y+s.height/2-f.height/2,m=s[r]/2-f[r]/2;let t;switch(g){case"top":t={x:i,y:s.y-f.height};break;case"bottom":t={x:i,y:s.y+s.height};break;case"right":t={x:s.x+s.width,y:a};break;case"left":t={x:s.x-f.width,y:a};break;default:t={x:s.x,y:s.y}}switch(Y(e)){case"start":t[c]-=m*(d&&x?-1:1);break;case"end":t[c]+=m*(d&&x?-1:1);break}return t}const st=async(o,e,d)=>{const{placement:s="bottom",strategy:f="absolute",middleware:n=[],platform:c}=d,r=n.filter(Boolean),g=await(c.isRTL==null?void 0:c.isRTL(e));let x=await c.getElementRects({reference:o,floating:e,strategy:f}),{x:i,y:a}=I(x,s,g),m=s,t={},l=0;for(let u=0;u<r.length;u++){const{name:w,fn:p}=r[u],{x:h,y,data:b,reset:v}=await p({x:i,y:a,initialPlacement:s,placement:m,strategy:f,middlewareData:t,rects:x,platform:c,elements:{reference:o,floating:e}});i=h??i,a=y??a,t={...t,[w]:{...t[w],...b}},v&&l<=50&&(l++,typeof v=="object"&&(v.placement&&(m=v.placement),v.rects&&(x=v.rects===!0?await c.getElementRects({reference:o,floating:e,strategy:f}):v.rects),{x:i,y:a}=I(x,m,g)),u=-1)}return{x:i,y:a,placement:m,strategy:f,middlewareData:t}};async function z(o,e){var d;e===void 0&&(e={});const{x:s,y:f,platform:n,rects:c,elements:r,strategy:g}=o,{boundary:x="clippingAncestors",rootBoundary:i="viewport",elementContext:a="floating",altBoundary:m=!1,padding:t=0}=H(e,o),l=q(t),w=r[m?a==="floating"?"reference":"floating":a],p=X(await n.getClippingRect({element:(d=await(n.isElement==null?void 0:n.isElement(w)))==null||d?w:w.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(r.floating)),boundary:x,rootBoundary:i,strategy:g})),h=a==="floating"?{x:s,y:f,width:c.floating.width,height:c.floating.height}:c.reference,y=await(n.getOffsetParent==null?void 0:n.getOffsetParent(r.floating)),b=await(n.isElement==null?void 0:n.isElement(y))?await(n.getScale==null?void 0:n.getScale(y))||{x:1,y:1}:{x:1,y:1},v=X(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:r,rect:h,offsetParent:y,strategy:g}):h);return{top:(p.top-v.top+l.top)/b.y,bottom:(v.bottom-p.bottom+l.bottom)/b.y,left:(p.left-v.left+l.left)/b.x,right:(v.right-p.right+l.right)/b.x}}const at=o=>({name:"arrow",options:o,async fn(e){const{x:d,y:s,placement:f,rects:n,platform:c,elements:r,middlewareData:g}=e,{element:x,padding:i=0}=H(o,e)||{};if(x==null)return{};const a=q(i),m={x:d,y:s},t=G(f),l=J(t),u=await c.getDimensions(x),w=t==="y",p=w?"top":"left",h=w?"bottom":"right",y=w?"clientHeight":"clientWidth",b=n.reference[l]+n.reference[t]-m[t]-n.floating[l],v=m[t]-n.reference[t],T=await(c.getOffsetParent==null?void 0:c.getOffsetParent(x));let O=T?T[y]:0;(!O||!await(c.isElement==null?void 0:c.isElement(T)))&&(O=r.floating[y]||n.floating[l]);const k=b/2-v/2,S=O/2-u[l]/2-1,P=W(a[p],S),L=W(a[h],S),C=P,M=O-u[l]-L,A=O/2-u[l]/2+k,j=_(C,A,M),E=!g.arrow&&Y(f)!=null&&A!==j&&n.reference[l]/2-(A<C?P:L)-u[l]/2<0,R=E?A<C?A-C:A-M:0;return{[t]:m[t]+R,data:{[t]:j,centerOffset:A-j-R,...E&&{alignmentOffset:R}},reset:E}}}),ot=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(e){var d,s;const{placement:f,middlewareData:n,rects:c,initialPlacement:r,platform:g,elements:x}=e,{mainAxis:i=!0,crossAxis:a=!0,fallbackPlacements:m,fallbackStrategy:t="bestFit",fallbackAxisSideDirection:l="none",flipAlignment:u=!0,...w}=H(o,e);if((d=n.arrow)!=null&&d.alignmentOffset)return{};const p=B(f),h=$(r),y=B(r)===r,b=await(g.isRTL==null?void 0:g.isRTL(x.floating)),v=m||(y||!u?[N(r)]:Q(r)),T=l!=="none";!m&&T&&v.push(...U(r,u,l,b));const O=[r,...v],k=await z(e,w),S=[];let P=((s=n.flip)==null?void 0:s.overflows)||[];if(i&&S.push(k[p]),a){const A=Z(f,c,b);S.push(k[A[0]],k[A[1]])}if(P=[...P,{placement:f,overflows:S}],!S.every(A=>A<=0)){var L,C;const A=(((L=n.flip)==null?void 0:L.index)||0)+1,j=O[A];if(j&&(!(a==="alignment"?h!==$(j):!1)||P.every(D=>D.overflows[0]>0&&$(D.placement)===h)))return{data:{index:A,overflows:P},reset:{placement:j}};let E=(C=P.filter(R=>R.overflows[0]<=0).sort((R,D)=>R.overflows[1]-D.overflows[1])[0])==null?void 0:C.placement;if(!E)switch(t){case"bestFit":{var M;const R=(M=P.filter(D=>{if(T){const V=$(D.placement);return V===h||V==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(V=>V>0).reduce((V,K)=>V+K,0)]).sort((D,V)=>D[1]-V[1])[0])==null?void 0:M[0];R&&(E=R);break}case"initialPlacement":E=r;break}if(f!==E)return{reset:{placement:E}}}return{}}}},et=new Set(["left","top"]);async function nt(o,e){const{placement:d,platform:s,elements:f}=o,n=await(s.isRTL==null?void 0:s.isRTL(f.floating)),c=B(d),r=Y(d),g=$(d)==="y",x=et.has(c)?-1:1,i=n&&g?-1:1,a=H(e,o);let{mainAxis:m,crossAxis:t,alignmentAxis:l}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:a.mainAxis||0,crossAxis:a.crossAxis||0,alignmentAxis:a.alignmentAxis};return r&&typeof l=="number"&&(t=r==="end"?l*-1:l),g?{x:t*i,y:m*x}:{x:m*x,y:t*i}}const lt=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(e){var d,s;const{x:f,y:n,placement:c,middlewareData:r}=e,g=await nt(e,o);return c===((d=r.offset)==null?void 0:d.placement)&&(s=r.arrow)!=null&&s.alignmentOffset?{}:{x:f+g.x,y:n+g.y,data:{...g,placement:c}}}}},ct=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(e){const{x:d,y:s,placement:f}=e,{mainAxis:n=!0,crossAxis:c=!1,limiter:r={fn:w=>{let{x:p,y:h}=w;return{x:p,y:h}}},...g}=H(o,e),x={x:d,y:s},i=await z(e,g),a=$(B(f)),m=tt(a);let t=x[m],l=x[a];if(n){const w=m==="y"?"top":"left",p=m==="y"?"bottom":"right",h=t+i[w],y=t-i[p];t=_(h,t,y)}if(c){const w=a==="y"?"top":"left",p=a==="y"?"bottom":"right",h=l+i[w],y=l-i[p];l=_(h,l,y)}const u=r.fn({...e,[m]:t,[a]:l});return{...u,data:{x:u.x-d,y:u.y-s,enabled:{[m]:n,[a]:c}}}}}},rt=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(e){var d,s;const{placement:f,rects:n,platform:c,elements:r}=e,{apply:g=()=>{},...x}=H(o,e),i=await z(e,x),a=B(f),m=Y(f),t=$(f)==="y",{width:l,height:u}=n.floating;let w,p;a==="top"||a==="bottom"?(w=a,p=m===(await(c.isRTL==null?void 0:c.isRTL(r.floating))?"start":"end")?"left":"right"):(p=a,w=m==="end"?"top":"bottom");const h=u-i.top-i.bottom,y=l-i.left-i.right,b=W(u-i[w],h),v=W(l-i[p],y),T=!e.middlewareData.shift;let O=b,k=v;if((d=e.middlewareData.shift)!=null&&d.enabled.x&&(k=y),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(O=h),T&&!m){const P=F(i.left,0),L=F(i.right,0),C=F(i.top,0),M=F(i.bottom,0);t?k=l-2*(P!==0||L!==0?P+L:F(i.left,i.right)):O=u-2*(C!==0||M!==0?C+M:F(i.top,i.bottom))}await g({...e,availableWidth:k,availableHeight:O});const S=await c.getDimensions(r.floating);return l!==S.width||u!==S.height?{reset:{rects:!0}}:{}}}};export{rt as a,at as b,st as c,ot as f,lt as o,ct as s};
