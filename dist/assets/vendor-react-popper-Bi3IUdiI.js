import{r as n}from"./vendor-react-Bo3cQ_TK.js";import{r as E}from"./vendor-react-dom-CbvJyPzC.js";import{i as P}from"./vendor-react-fast-compare-CVeK3Sao.js";import{c as U}from"./vendor-@popperjs/core-CMBiYTiD.js";var v=function(s){return s.reduce(function(u,t){var o=t[0],e=t[1];return u[o]=e,u},{})},b=typeof window<"u"&&window.document&&window.document.createElement?n.useLayoutEffect:n.useEffect,g=[],R=function(s,u,t){t===void 0&&(t={});var o=n.useRef(null),e={onFirstUpdate:t.onFirstUpdate,placement:t.placement||"bottom",strategy:t.strategy||"absolute",modifiers:t.modifiers||g},l=n.useState({styles:{popper:{position:e.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),d=l[0],S=l[1],m=n.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(c){var f=c.state,y=Object.keys(f.elements);E.flushSync(function(){S({styles:v(y.map(function(i){return[i,f.styles[i]||{}]})),attributes:v(y.map(function(i){return[i,f.attributes[i]]}))})})},requires:["computeStyles"]}},[]),p=n.useMemo(function(){var a={onFirstUpdate:e.onFirstUpdate,placement:e.placement,strategy:e.strategy,modifiers:[].concat(e.modifiers,[m,{name:"applyStyles",enabled:!1}])};return P(o.current,a)?o.current||a:(o.current=a,a)},[e.onFirstUpdate,e.placement,e.strategy,e.modifiers,m]),r=n.useRef();return b(function(){r.current&&r.current.setOptions(p)},[p]),b(function(){if(!(s==null||u==null)){var a=t.createPopper||U,c=a(s,u,p);return r.current=c,function(){c.destroy(),r.current=null}}},[s,u,t.createPopper]),{state:r.current?r.current.state:null,styles:d.styles,attributes:d.attributes,update:r.current?r.current.update:null,forceUpdate:r.current?r.current.forceUpdate:null}};export{R as u};
