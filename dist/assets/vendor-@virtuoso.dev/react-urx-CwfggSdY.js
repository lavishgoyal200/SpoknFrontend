import{r as s}from"../vendor-react-Bo3cQ_TK.js";import{t as H,i as L,c as C,s as g,r as R,a as A,p as h,g as q,b as M,e as F}from"./urx-Bc7K0oMT.js";function K(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,d;for(d=0;d<i.length;d++)c=i[d],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function U(e,t){if(e){if(typeof e=="string")return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}function w(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function O(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=U(e))||t){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $=["children"];function z(e,t){for(var r={},i={},c=0,d=e.length;c<d;)i[e[c]]=1,c+=1;for(var y in t)i.hasOwnProperty(y)||(r[y]=t[y]);return r}var x=typeof document<"u"?s.useLayoutEffect:s.useEffect;function G(e,t,r){var i=Object.keys(t.required||{}),c=Object.keys(t.optional||{}),d=Object.keys(t.methods||{}),y=Object.keys(t.events||{}),p=s.createContext({});function j(a,n){a.propsReady&&h(a.propsReady,!1);for(var o=O(i),u;!(u=o()).done;){var f=u.value,l=a[t.required[f]];h(l,n[f])}for(var m=O(c),v;!(v=m()).done;){var b=v.value;if(b in n){var E=a[t.optional[b]];h(E,n[b])}}a.propsReady&&h(a.propsReady,!0)}function I(a){return d.reduce(function(n,o){return n[o]=function(u){var f=a[t.methods[o]];h(f,u)},n},{})}function P(a){return y.reduce(function(n,o){return n[o]=F(a[t.events[o]]),n},{})}var k=s.forwardRef(function(a,n){var o=a.children,u=K(a,$),f=s.useState(function(){return H(L(e),function(b){return j(b,u)})}),l=f[0],m=s.useState(C(P,l)),v=m[0];return x(function(){for(var b=O(y),E;!(E=b()).done;){var S=E.value;S in u&&g(v[S],u[S])}return function(){Object.values(v).map(R)}},[u,v,l]),x(function(){j(l,u)}),s.useImperativeHandle(n,A(I(l))),s.createElement(p.Provider,{value:l},r?s.createElement(r,z([].concat(i,c,y),u),o):o)}),T=function(n){return s.useCallback(M(h,s.useContext(p)[n]),[n])},V=function(n){var o=s.useContext(p),u=o[n],f=s.useState(C(q,u)),l=f[0],m=f[1];return x(function(){return g(u,function(v){v!==l&&m(A(v))})},[u,l]),l},_=function(n,o){var u=s.useContext(p),f=u[n];x(function(){return g(f,o)},[o,f])};return{Component:k,usePublisher:T,useEmitterValue:V,useEmitter:_}}export{G as s};
