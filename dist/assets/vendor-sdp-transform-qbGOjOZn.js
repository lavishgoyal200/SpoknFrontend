var o={},v={},h={exports:{}},x;function y(){if(x)return h.exports;x=1;var m=h.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var i="candidate:%s %d %s %d %s %d typ %s";return i+=e.raddr!=null?" raddr %s rport %d":"%v%v",i+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(i+=" generation %d"),i+=e["network-id"]!=null?" network-id %d":"%v",i+=e["network-cost"]!=null?" network-cost %d":"%v",i}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var i="ssrc:%d";return e.attribute!=null&&(i+=" %s",e.value!=null&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var i="mediaclk:";return i+=e.id!=null?"id=%s %s":"%v%s",i+=e.mediaClockValue!=null?"=%s":"",i+=e.rateNumerator!=null?" rate=%s":"",i+=e.rateDenominator!=null?"/%s":"",i}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(m).forEach(function(e){var i=m[e];i.forEach(function(p){p.reg||(p.reg=/(.*)/),p.format||(p.format="%s")})}),h.exports}var k;function E(){return k||(k=1,function(m){var e=function(r){return String(Number(r))===r?Number(r):r},i=function(r,t,n,s){if(s&&!n)t[s]=e(r[1]);else for(var a=0;a<n.length;a+=1)r[a+1]!=null&&(t[n[a]]=e(r[a+1]))},p=function(r,t,n){var s=r.name&&r.names;r.push&&!t[r.push]?t[r.push]=[]:s&&!t[r.name]&&(t[r.name]={});var a=r.push?{}:s?t[r.name]:t;i(n.match(r.reg),a,r.names,r.name),r.push&&t[r.push].push(a)},l=y(),g=RegExp.prototype.test.bind(/^([a-z])=(.*)/);m.parse=function(r){var t={},n=[],s=t;return r.split(/(\r\n|\r|\n)/).filter(g).forEach(function(a){var d=a[0],c=a.slice(2);d==="m"&&(n.push({rtp:[],fmtp:[]}),s=n[n.length-1]);for(var f=0;f<(l[d]||[]).length;f+=1){var w=l[d][f];if(w.reg.test(c))return p(w,s,c)}}),t.media=n,t};var u=function(r,t){var n=t.split(/=(.+)/,2);return n.length===2?r[n[0]]=e(n[1]):n.length===1&&t.length>1&&(r[n[0]]=void 0),r};m.parseParams=function(r){return r.split(/;\s?/).reduce(u,{})},m.parseFmtpConfig=m.parseParams,m.parsePayloads=function(r){return r.toString().split(" ").map(Number)},m.parseRemoteCandidates=function(r){for(var t=[],n=r.split(" ").map(e),s=0;s<n.length;s+=3)t.push({component:n[s],ip:n[s+1],port:n[s+2]});return t},m.parseImageAttributes=function(r){return r.split(" ").map(function(t){return t.substring(1,t.length-1).split(",").reduce(u,{})})},m.parseSimulcastStreamList=function(r){return r.split(";").map(function(t){return t.split(",").map(function(n){var s,a=!1;return n[0]!=="~"?s=e(n):(s=e(n.substring(1,n.length)),a=!0),{scid:s,paused:a}})})}}(v)),v}var S,I;function C(){if(I)return S;I=1;var m=y(),e=/%[sdv%]/g,i=function(u){var r=1,t=arguments,n=t.length;return u.replace(e,function(s){if(r>=n)return s;var a=t[r];switch(r+=1,s){case"%%":return"%";case"%s":return String(a);case"%d":return Number(a);case"%v":return""}})},p=function(u,r,t){var n=r.format instanceof Function?r.format(r.push?t:t[r.name]):r.format,s=[u+"="+n];if(r.names)for(var a=0;a<r.names.length;a+=1){var d=r.names[a];r.name?s.push(t[r.name][d]):s.push(t[r.names[a]])}else s.push(t[r.name]);return i.apply(null,s)},l=["v","o","s","i","u","e","p","c","b","t","r","z","a"],g=["i","c","b","a"];return S=function(u,r){r=r||{},u.version==null&&(u.version=0),u.name==null&&(u.name=" "),u.media.forEach(function(a){a.payloads==null&&(a.payloads="")});var t=r.outerOrder||l,n=r.innerOrder||g,s=[];return t.forEach(function(a){m[a].forEach(function(d){d.name in u&&u[d.name]!=null?s.push(p(a,d,u)):d.push in u&&u[d.push]!=null&&u[d.push].forEach(function(c){s.push(p(a,d,c))})})}),u.media.forEach(function(a){s.push(p("m",m.m[0],a)),n.forEach(function(d){m[d].forEach(function(c){c.name in a&&a[c.name]!=null?s.push(p(d,c,a)):c.push in a&&a[c.push]!=null&&a[c.push].forEach(function(f){s.push(p(d,c,f))})})})}),s.join(`\r
`)+`\r
`},S}var P;function R(){if(P)return o;P=1;var m=E(),e=C(),i=y();return o.grammar=i,o.write=e,o.parse=m.parse,o.parseParams=m.parseParams,o.parseFmtpConfig=m.parseFmtpConfig,o.parsePayloads=m.parsePayloads,o.parseRemoteCandidates=m.parseRemoteCandidates,o.parseImageAttributes=m.parseImageAttributes,o.parseSimulcastStreamList=m.parseSimulcastStreamList,o}var z=R();export{z as l};
