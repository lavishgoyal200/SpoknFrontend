import{S as y,s as le}from"./vendor-sdp-B4BBrFNZ.js";let U=!0,z=!0;function g(e,r,o){const t=e.match(r);return t&&t.length>=o&&parseFloat(t[o],10)}function C(e,r,o){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.addEventListener;t.addEventListener=function(s,i){if(s!==r)return n.apply(this,arguments);const f=c=>{const p=o(c);p&&(i.handleEvent?i.handleEvent(p):i(p))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(i,f),n.apply(this,[s,f])};const a=t.removeEventListener;t.removeEventListener=function(s,i){if(s!==r||!this._eventMap||!this._eventMap[r])return a.apply(this,arguments);if(!this._eventMap[r].has(i))return a.apply(this,arguments);const f=this._eventMap[r].get(i);return this._eventMap[r].delete(i),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[s,f])},Object.defineProperty(t,"on"+r,{get(){return this["_on"+r]},set(s){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),s&&this.addEventListener(r,this["_on"+r]=s)},enumerable:!0,configurable:!0})}function Ce(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(U=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ge(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(z=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function F(){if(typeof window=="object"){if(U)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function x(e,r){z&&console.warn(e+" is deprecated, please use "+r+" instead.")}function ye(e){const r={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return r.browser="Not a browser.",r;const{navigator:o}=e;if(o.mozGetUserMedia)r.browser="firefox",r.version=parseInt(g(o.userAgent,/Firefox\/(\d+)\./,1));else if(o.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)r.browser="chrome",r.version=parseInt(g(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))r.browser="safari",r.version=parseInt(g(o.userAgent,/AppleWebKit\/(\d+)\./,1)),r.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,r._safariVersion=g(o.userAgent,/Version\/(\d+(\.?\d+))/,1);else return r.browser="Not a supported browser.",r;return r}function O(e){return Object.prototype.toString.call(e)==="[object Object]"}function N(e){return O(e)?Object.keys(e).reduce(function(r,o){const t=O(e[o]),n=t?N(e[o]):e[o],a=t&&!Object.keys(n).length;return n===void 0||a?r:Object.assign(r,{[o]:n})},{}):e}function _(e,r,o){!r||o.has(r.id)||(o.set(r.id,r),Object.keys(r).forEach(t=>{t.endsWith("Id")?_(e,e.get(r[t]),o):t.endsWith("Ids")&&r[t].forEach(n=>{_(e,e.get(n),o)})}))}function j(e,r,o){const t=o?"outbound-rtp":"inbound-rtp",n=new Map;if(r===null)return n;const a=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===r.id&&a.push(s)}),a.forEach(s=>{e.forEach(i=>{i.type===t&&i.trackId===s.id&&_(e,i,n)})}),n}const L=F;function J(e,r){const o=e&&e.navigator;if(!o.mediaDevices)return;const t=function(i){if(typeof i!="object"||i.mandatory||i.optional)return i;const f={};return Object.keys(i).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const p=typeof i[c]=="object"?i[c]:{ideal:i[c]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const d=function(u,m){return u?u+m.charAt(0).toUpperCase()+m.slice(1):m==="deviceId"?"sourceId":m};if(p.ideal!==void 0){f.optional=f.optional||[];let u={};typeof p.ideal=="number"?(u[d("min",c)]=p.ideal,f.optional.push(u),u={},u[d("max",c)]=p.ideal,f.optional.push(u)):(u[d("",c)]=p.ideal,f.optional.push(u))}p.exact!==void 0&&typeof p.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[d("",c)]=p.exact):["min","max"].forEach(u=>{p[u]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[d(u,c)]=p[u])})}),i.advanced&&(f.optional=(f.optional||[]).concat(i.advanced)),f},n=function(i,f){if(r.version>=61)return f(i);if(i=JSON.parse(JSON.stringify(i)),i&&typeof i.audio=="object"){const c=function(p,d,u){d in p&&!(u in p)&&(p[u]=p[d],delete p[d])};i=JSON.parse(JSON.stringify(i)),c(i.audio,"autoGainControl","googAutoGainControl"),c(i.audio,"noiseSuppression","googNoiseSuppression"),i.audio=t(i.audio)}if(i&&typeof i.video=="object"){let c=i.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const p=r.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete i.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return o.mediaDevices.enumerateDevices().then(u=>{u=u.filter(h=>h.kind==="videoinput");let m=u.find(h=>d.some(l=>h.label.toLowerCase().includes(l)));return!m&&u.length&&d.includes("back")&&(m=u[u.length-1]),m&&(i.video.deviceId=c.exact?{exact:m.deviceId}:{ideal:m.deviceId}),i.video=t(i.video),L("chrome: "+JSON.stringify(i)),f(i)})}i.video=t(i.video)}return L("chrome: "+JSON.stringify(i)),f(i)},a=function(i){return r.version>=64?i:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[i.name]||i.name,message:i.message,constraint:i.constraint||i.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(i,f,c){n(i,p=>{o.webkitGetUserMedia(p,f,d=>{c&&c(a(d))})})};if(o.getUserMedia=s.bind(o),o.mediaDevices.getUserMedia){const i=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(f){return n(f,c=>i(c).then(p=>{if(c.audio&&!p.getAudioTracks().length||c.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(a(p))))}}}function ve(e,r){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof r!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(t){return r(t).then(n=>{const a=t.video&&t.video.width,s=t.video&&t.video.height,i=t.video&&t.video.frameRate;return t.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:i||3}},a&&(t.video.mandatory.maxWidth=a),s&&(t.video.mandatory.maxHeight=s),e.navigator.mediaDevices.getUserMedia(t)})}}}function V(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function $(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(i=>i.track&&i.track.id===n.track.id):a={track:n.track};const s=new Event("track");s.track=n.track,s.receiver=a,s.transceiver={receiver:a},s.streams=[t.stream],this.dispatchEvent(s)}),t.stream.getTracks().forEach(n=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(i=>i.track&&i.track.id===n.id):a={track:n};const s=new Event("track");s.track=n,s.receiver=a,s.transceiver={receiver:a},s.streams=[t.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else C(e,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function B(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const r=function(n,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=n.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:n}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(i,f){let c=n.apply(this,arguments);return c||(c=r(this,i),this._senders.push(c)),c};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(i){a.apply(this,arguments);const f=this._senders.indexOf(i);f!==-1&&this._senders.splice(f,1)}}const o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],o.apply(this,[a]),a.getTracks().forEach(s=>{this._senders.push(r(this,s))})};const t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],t.apply(this,[a]),a.getTracks().forEach(s=>{const i=this._senders.find(f=>f.track===s);i&&this._senders.splice(this._senders.indexOf(i),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const t=r.apply(this,[]);return t.forEach(n=>n._pc=this),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function K(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[t,n,a]=arguments;if(arguments.length>0&&typeof t=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof t!="function"))return r.apply(this,[]);const s=function(f){const c={};return f.result().forEach(d=>{const u={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(m=>{u[m]=d.stat(m)}),c[u.id]=u}),c},i=function(f){return new Map(Object.keys(f).map(c=>[c,f[c]]))};if(arguments.length>=2){const f=function(c){n(i(s(c)))};return r.apply(this,[f,t])}return new Promise((f,c)=>{r.apply(this,[function(p){f(i(s(p)))},c])}).then(n,a)}}function H(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const o=e.RTCPeerConnection.prototype.getSenders;o&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=o.apply(this,[]);return a.forEach(s=>s._pc=this),a});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(s=>j(s,a.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const o=e.RTCPeerConnection.prototype.getReceivers;o&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=o.apply(this,[]);return n.forEach(a=>a._pc=this),n}),C(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(a=>j(a,n.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const t=arguments[0];let n,a,s;return this.getSenders().forEach(i=>{i.track===t&&(n?s=!0:n=i)}),this.getReceivers().forEach(i=>(i.track===t&&(a?s=!0:a=i),i.track===t)),s||n&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function q(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,i){if(!i)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=r.apply(this,arguments);return this._shimmedLocalStreams[i.id]?this._shimmedLocalStreams[i.id].indexOf(f)===-1&&this._shimmedLocalStreams[i.id].push(f):this._shimmedLocalStreams[i.id]=[i,f],f};const o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const i=this.getSenders();o.apply(this,arguments);const f=this.getSenders().filter(c=>i.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(f)};const t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],t.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(i=>{const f=this._shimmedLocalStreams[i].indexOf(s);f!==-1&&this._shimmedLocalStreams[i].splice(f,1),this._shimmedLocalStreams[i].length===1&&delete this._shimmedLocalStreams[i]}),n.apply(this,arguments)}}function Y(e,r){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&r.version>=65)return q(e);const o=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=o.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(d=>this._reverseStreams[d.id])};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(d=>{if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const d=new e.MediaStream(p.getTracks());this._streams[p.id]=d,this._reverseStreams[d.id]=p,p=d}t.apply(this,[p])};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const u=[].slice.call(arguments,1);if(u.length!==1||!u[0].getTracks().find(l=>l===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(l=>l.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const h=this._streams[d.id];if(h)h.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const l=new e.MediaStream([p]);this._streams[d.id]=l,this._reverseStreams[l.id]=d,this.addStream(l)}return this.getSenders().find(l=>l.track===p)};function a(c,p){let d=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{const m=c._reverseStreams[u],h=c._streams[m.id];d=d.replace(new RegExp(h.id,"g"),m.id)}),new RTCSessionDescription({type:p.type,sdp:d})}function s(c,p){let d=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{const m=c._reverseStreams[u],h=c._streams[m.id];d=d.replace(new RegExp(m.id,"g"),h.id)}),new RTCSessionDescription({type:p.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const p=e.RTCPeerConnection.prototype[c],d={[c](){const u=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[h=>{const l=a(this,h);u[0].apply(null,[l])},h=>{u[1]&&u[1].apply(null,h)},arguments[2]]):p.apply(this,arguments).then(h=>a(this,h))}};e.RTCPeerConnection.prototype[c]=d[c]});const i=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?i.apply(this,arguments):(arguments[0]=s(this,arguments[0]),i.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=f.get.apply(this);return c.type===""?c:a(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let u;Object.keys(this._streams).forEach(m=>{this._streams[m].getTracks().find(l=>p.track===l)&&(u=this._streams[m])}),u&&(u.getTracks().length===1?this.removeStream(this._reverseStreams[u.id]):u.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function E(e,r){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const t=e.RTCPeerConnection.prototype[o],n={[o](){return arguments[0]=new(o==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};e.RTCPeerConnection.prototype[o]=n[o]})}function Q(e,r){C(e,"negotiationneeded",o=>{const t=o.target;if(!((r.version<72||t.getConfiguration&&t.getConfiguration().sdpSemantics==="plan-b")&&t.signalingState!=="stable"))return o})}const A=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Q,shimAddTrackRemoveTrack:Y,shimAddTrackRemoveTrackWithNative:q,shimGetDisplayMedia:ve,shimGetSendersWithDtmf:B,shimGetStats:K,shimGetUserMedia:J,shimMediaStream:V,shimOnTrack:$,shimPeerConnection:E,shimSenderReceiverGetStats:H},Symbol.toStringTag,{value:"Module"}));function X(e,r){const o=e&&e.navigator,t=e&&e.MediaStreamTrack;if(o.getUserMedia=function(n,a,s){x("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(n).then(a,s)},!(r.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const n=function(s,i,f){i in s&&!(f in s)&&(s[f]=s[i],delete s[i])},a=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),n(s.audio,"autoGainControl","mozAutoGainControl"),n(s.audio,"noiseSuppression","mozNoiseSuppression")),a(s)},t&&t.prototype.getSettings){const s=t.prototype.getSettings;t.prototype.getSettings=function(){const i=s.apply(this,arguments);return n(i,"mozAutoGainControl","autoGainControl"),n(i,"mozNoiseSuppression","noiseSuppression"),i}}if(t&&t.prototype.applyConstraints){const s=t.prototype.applyConstraints;t.prototype.applyConstraints=function(i){return this.kind==="audio"&&typeof i=="object"&&(i=JSON.parse(JSON.stringify(i)),n(i,"autoGainControl","mozAutoGainControl"),n(i,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[i])}}}}function Se(e,r){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return t.video===!0?t.video={mediaSource:r}:t.video.mediaSource=r,e.navigator.mediaDevices.getUserMedia(t)})}function Z(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function k(e,r){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const a=e.RTCPeerConnection.prototype[n],s={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=s[n]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[a,s,i]=arguments;return t.apply(this,[a||null]).then(f=>{if(r.version<53&&!s)try{f.forEach(c=>{c.type=o[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;f.forEach((p,d)=>{f.set(d,Object.assign({},p,{type:o[p.type]||p.type}))})}return f}).then(s,i)}}function W(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const n=r.apply(this,[]);return n.forEach(a=>a._pc=this),n});const o=e.RTCPeerConnection.prototype.addTrack;o&&(e.RTCPeerConnection.prototype.addTrack=function(){const n=o.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function w(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const t=r.apply(this,[]);return t.forEach(n=>n._pc=this),t}),C(e,"track",o=>(o.receiver._pc=o.srcElement,o)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ee(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(o){x("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&o.getTracks().includes(t.track)&&this.removeTrack(t)})})}function te(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function re(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.addTransceiver;r&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;t===void 0&&(t=[]),t=[...t];const n=t.length>0;n&&t.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=r.apply(this,arguments);if(n){const{sender:s}=a,i=s.getParameters();(!("encodings"in i)||i.encodings.length===1&&Object.keys(i.encodings[0]).length===0)&&(i.encodings=t,s.sendEncodings=t,this.setParametersPromises.push(s.setParameters(i).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return a})}function ne(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const r=e.RTCRtpSender.prototype.getParameters;r&&(e.RTCRtpSender.prototype.getParameters=function(){const t=r.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function ie(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function oe(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}const I=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:re,shimCreateAnswer:oe,shimCreateOffer:ie,shimGetDisplayMedia:Se,shimGetParameters:ne,shimGetUserMedia:X,shimOnTrack:Z,shimPeerConnection:k,shimRTCDataChannel:te,shimReceiverGetStats:w,shimRemoveStream:ee,shimSenderGetStats:W},Symbol.toStringTag,{value:"Module"}));function se(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(n=>r.call(this,n,t)),t.getVideoTracks().forEach(n=>r.call(this,n,t))},e.RTCPeerConnection.prototype.addTrack=function(t,...n){return n&&n.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),r.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(o){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(o);if(t===-1)return;this._localStreams.splice(t,1);const n=o.getTracks();this.getSenders().forEach(a=>{n.includes(a.track)&&this.removeTrack(a)})})}}function ae(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const a=new Event("addstream");a.stream=n,this.dispatchEvent(a)})})}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(a=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(a)>=0)return;t._remoteStreams.push(a);const s=new Event("addstream");s.stream=a,t.dispatchEvent(s)})}),r.apply(t,arguments)}}}function ce(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.createOffer,t=r.createAnswer,n=r.setLocalDescription,a=r.setRemoteDescription,s=r.addIceCandidate;r.createOffer=function(c,p){const d=arguments.length>=2?arguments[2]:arguments[0],u=o.apply(this,[d]);return p?(u.then(c,p),Promise.resolve()):u},r.createAnswer=function(c,p){const d=arguments.length>=2?arguments[2]:arguments[0],u=t.apply(this,[d]);return p?(u.then(c,p),Promise.resolve()):u};let i=function(f,c,p){const d=n.apply(this,[f]);return p?(d.then(c,p),Promise.resolve()):d};r.setLocalDescription=i,i=function(f,c,p){const d=a.apply(this,[f]);return p?(d.then(c,p),Promise.resolve()):d},r.setRemoteDescription=i,i=function(f,c,p){const d=s.apply(this,[f]);return p?(d.then(c,p),Promise.resolve()):d},r.addIceCandidate=i}function pe(e){const r=e&&e.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const o=r.mediaDevices,t=o.getUserMedia.bind(o);r.mediaDevices.getUserMedia=n=>t(fe(n))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(t,n,a){r.mediaDevices.getUserMedia(t).then(n,a)}).bind(r))}function fe(e){return e&&e.video!==void 0?Object.assign({},e,{video:N(e.video)}):e}function de(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection;e.RTCPeerConnection=function(t,n){if(t&&t.iceServers){const a=[];for(let s=0;s<t.iceServers.length;s++){let i=t.iceServers[s];i.urls===void 0&&i.url?(x("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,a.push(i)):a.push(t.iceServers[s])}t.iceServers=a}return new r(t,n)},e.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return r.generateCertificate}})}function ue(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function me(e){const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const n=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):t.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio",{direction:"recvonly"}),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const a=this.getTransceivers().find(s=>s.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):t.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function he(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const G=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:he,shimCallbacksAPI:ce,shimConstraints:fe,shimCreateOfferLegacy:me,shimGetUserMedia:pe,shimLocalStreamsAPI:se,shimRTCIceServerUrls:de,shimRemoteStreamsAPI:ae,shimTrackEventTransceiver:ue},Symbol.toStringTag,{value:"Module"}));function v(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const r=e.RTCIceCandidate;e.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){const n=new r(t),a=y.parseCandidate(t.candidate);for(const s in a)s in n||Object.defineProperty(n,s,{value:a[s]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new r(t)},e.RTCIceCandidate.prototype=r.prototype,C(e,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new e.RTCIceCandidate(o.candidate),writable:"false"}),o))}function b(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||C(e,"icecandidate",r=>{if(r.candidate){const o=y.parseCandidate(r.candidate.candidate);o.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[o.priority>>24])}return r})}function S(e,r){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const o=function(i){if(!i||!i.sdp)return!1;const f=y.splitSections(i.sdp);return f.shift(),f.some(c=>{const p=y.parseMLine(c);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},t=function(i){const f=i.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const c=parseInt(f[1],10);return c!==c?-1:c},n=function(i){let f=65536;return r.browser==="firefox"&&(r.version<57?i===-1?f=16384:f=2147483637:r.version<60?f=r.version===57?65535:65536:f=2147483637),f},a=function(i,f){let c=65536;r.browser==="firefox"&&r.version===57&&(c=65535);const p=y.matchPrefix(i.sdp,"a=max-message-size:");return p.length>0?c=parseInt(p[0].substring(19),10):r.browser==="firefox"&&f!==-1&&(c=2147483637),c},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const f=t(arguments[0]),c=n(f),p=a(arguments[0],f);let d;c===0&&p===0?d=Number.POSITIVE_INFINITY:c===0||p===0?d=Math.max(c,p):d=Math.min(c,p);const u={};Object.defineProperty(u,"maxMessageSize",{get(){return d}}),this._sctp=u}return s.apply(this,arguments)}}function T(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function r(t,n){const a=t.send;t.send=function(){const i=arguments[0],f=i.length||i.size||i.byteLength;if(t.readyState==="open"&&n.sctp&&f>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return a.apply(t,arguments)}}const o=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const n=o.apply(this,arguments);return r(n,this),n},C(e,"datachannel",t=>(r(t.channel,t.target),t))}function D(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const t=r[o];r[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const a=n.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const s=new Event("connectionstatechange",n);a.dispatchEvent(s)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function M(e,r){if(!e.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r._safariVersion>=13.1)return;const o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=n.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:a}):n.sdp=a}return o.apply(this,arguments)}}function R(e,r){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const o=e.RTCPeerConnection.prototype.addIceCandidate;!o||o.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function P(e,r){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const o=e.RTCPeerConnection.prototype.setLocalDescription;!o||o.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return o.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer";break}return n.sdp||n.type!=="offer"&&n.type!=="answer"?o.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>o.apply(this,[s]))})}const Te=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:M,shimAddIceCandidateNullOrEmpty:R,shimConnectionState:D,shimMaxMessageSize:S,shimParameterlessSetLocalDescription:P,shimRTCIceCandidate:v,shimRTCIceCandidateRelayProtocol:b,shimSendThrowTypeError:T},Symbol.toStringTag,{value:"Module"}));function Re({window:e}={},r={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const o=F,t=ye(e),n={browserDetails:t,commonShim:Te,extractVersion:g,disableLog:Ce,disableWarnings:ge,sdp:le};switch(t.browser){case"chrome":if(!A||!E||!r.shimChrome)return o("Chrome shim is not included in this adapter release."),n;if(t.version===null)return o("Chrome shim can not determine version, not shimming."),n;o("adapter.js shimming chrome."),n.browserShim=A,R(e,t),P(e),J(e,t),V(e),E(e,t),$(e),Y(e,t),B(e),K(e),H(e),Q(e,t),v(e),b(e),D(e),S(e,t),T(e),M(e,t);break;case"firefox":if(!I||!k||!r.shimFirefox)return o("Firefox shim is not included in this adapter release."),n;o("adapter.js shimming firefox."),n.browserShim=I,R(e,t),P(e),X(e,t),k(e,t),Z(e),ee(e),W(e),w(e),te(e),re(e),ne(e),ie(e),oe(e),v(e),D(e),S(e,t),T(e);break;case"safari":if(!G||!r.shimSafari)return o("Safari shim is not included in this adapter release."),n;o("adapter.js shimming safari."),n.browserShim=G,R(e,t),P(e),de(e),me(e),ce(e),se(e),ae(e),ue(e),pe(e),he(e),v(e),b(e),S(e,t),T(e),M(e,t);break;default:o("Unsupported browser!");break}return n}Re({window:typeof window>"u"?void 0:window});
